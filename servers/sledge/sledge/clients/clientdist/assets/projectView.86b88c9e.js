import{_ as w,i as y,o as n,c as r,t as c,m as i,d as e,F as b,e as j,h as _,f as l,b as a,s as U,j as x,w as k,n as H,v as J,A as g}from"./index.d0819ba4.js";import{s as q}from"./stackTpl.66f77d3f.js";import{b as v,P as z,A as E,W as O,T as L,_ as G,I as K,t as Q,a as X,c as Y,i as Z}from"./invoiceIndex.eb9fdb73.js";import{N as $}from"./newWorker.0da50cd2.js";import"./index.10815fb0.js";import"./tabulator_esm.e1f37e8f.js";const ee={name:"projectWorker",props:{employee:Object,projectTasks:Array},components:{},data(){return{err:null,worker:null,task:null,unassignedTasks:null}},mounted(){setTimeout(()=>{this.getWorker()},200),this.processTasks()},methods:{async getWorker(){await this.getWorkerData()},async getWorkerData(){const o=this;y.get(`http://${location.hostname}/getworker/${o.employee.id}`).then(s=>{s.status==200&&(o.worker=s.data)}).catch(s=>{o.err=s.message})},async saveWorkerData(){const o=this;y.put(`http://${location.hostname}/worker/${o.employee.id}`,o.worker).then(s=>{s.status==200&&(o.worker=s.data)}).catch(s=>{o.err=s.message})},processTasks(){function o(s){if(!s.assignedto)return s}this.unassignedTasks=this.projectTasks.map(o)}}},te={key:0,class:"text-sm text-red-600"},se={class:"text-sm bg-green-300 text-green-800 rounded mx-5 my-5 p-5"},oe={class:"flex flex-row mx-5 my-5"},ne={class:"text-sm bg-gray-300 text-gray-800 rounded mx-5 p-5 w-1/2"},re={class:"w-1/2"},ce=e("li",{class:"h-12 bg-gray-300 rounded-md"}," Project Tasks ",-1);function le(o,s,u,f,t,d){return n(),r(b,null,[t.err?(n(),r("p",te,c(t.err),1)):i("",!0),e("p",se,"Prop "+c(u.employee),1),e("div",oe,[e("p",ne," Data "+c(t.worker),1),e("ul",re,[ce,(n(!0),r(b,null,j(t.unassignedTasks,m=>(n(),r("li",{key:m._id},c(m.description)+" "+c(m.assignedto),1))),128))])])],64)}const ae=w(ee,[["render",le]]),ie={name:"projectInvoice",props:{record:{Object}},components:{DCurrency:v},methods:{setItemTotal(o,s){return parseFloat(o)*parseFloat(s)},printInvoice(){alert("This Feature is being tested! Use with caution."),printJS({printable:"invoice-rec",type:"html",targetStyles:["*"],footer:"PrintJS - Print Form With Customized Header"})}}},de={class:"flex flex-col mx-2 items-center"},ue={key:0,id:"invoice-rec",class:"bg-gray-100 text-xs border-2 border-gray-200 rounded-md p-2 shadow-md"},pe={class:"text-center text-lg font-semibold my-2"},me={class:"text-center text-sm font-semibold my-2"},he=e("span",{class:"mx-2"},"Tax id",-1),_e={class:"text-center text-lg font-semibold my-2"},ke={class:"text-left text-sm my-2 flex flex-col mx-5"},ye={key:0,class:"table table-xs mx-2"},xe=e("thead",null,[e("tr",null,[e("td",null,"Item"),e("td",null,"Description"),e("td",null,"Unit"),e("td",null,"Amt"),e("td",null,"Price"),e("td",null,"Total")])],-1),be=e("td",null,null,-1),we=e("td",null,null,-1),fe=e("td",null,null,-1),ge=e("td",null,null,-1),je=e("td",null,null,-1),ve=e("td",null,"Tax",-1),Te=e("td",null,null,-1),Ce=e("td",null,null,-1),Ie=e("td",null,null,-1),Pe=e("td",null,null,-1),De=e("td",null,"Total",-1),We={key:1,class:"text-right text-sm my-2 flex flex-col"},Ae=_("Tax "),Se=_("Invoice Total: ");function Me(o,s,u,f,t,d){const m=a("DCurrency");return n(),r("div",de,[u.record.invoiceno?(n(),r("section",ue,[e("h2",pe,c(u.record.supplier.name),1),e("h2",me,[he,_(" "+c(u.record.supplier.taxid),1)]),e("h1",_e,"Invoice No. "+c(u.record.invoiceno),1),e("p",ke,[e("span",null,"Inv.no "+c(u.record.invoiceno),1),e("span",null,"Date: "+c(u.record.datetime),1)]),u.record.items.length>0?(n(),r("table",ye,[xe,e("tbody",null,[(n(!0),r(b,null,j(u.record.items,h=>(n(),r("tr",{key:h.itemno},[e("td",null,c(h.itemno),1),e("td",null,c(h.description),1),e("td",null,c(h.unit),1),e("td",null,c(h.quantity),1),e("td",null,[l(m,{amount:h.price},null,8,["amount"])]),e("td",null,[l(m,{amount:d.setItemTotal(h.price,h.quantity)},null,8,["amount"])]),be]))),128)),e("tr",null,[we,fe,ge,je,ve,e("td",null,[l(m,{amount:u.record.tax},null,8,["amount"])])]),e("tr",null,[Te,Ce,Ie,Pe,De,e("td",null,[l(m,{amount:u.record.total},null,8,["amount"])])])])])):(n(),r("p",We,[e("span",null,[Ae,l(m,{amount:u.record.tax},null,8,["amount"])]),e("span",null,[Se,l(m,{amount:u.record.total},null,8,["amount"])])]))])):i("",!0),e("button",{class:"btn btn-sm btn-primary my-5",onClick:s[0]||(s[0]=(...h)=>d.printInvoice&&d.printInvoice(...h))},"Print")])}const Ne=w(ie,[["render",Me]]),Ve={props:{id:{String}},inject:["message"],data(){return{alert:{message:`Project ${this.id} Stack View`,status:"info"},project:null,isMetric:!1,state:{state:null,setting:{inner:"flex flex-row h-12 border border-gray-300 my-2 mx-5 rounded-md min-w-full relative",outer:"flex flex-row items-inline space-x-2 border border-gray-300 "}},show:{display:!0,tasks:!1,addtask:!1,addworker:!1,lsbar:{account:!1,hr:!1,jobs:!1,hardware:!0,inventory:!1}},invoice:null,transaction:null,worker:null,task:null}},components:{stackTpl:q,siteAlert:U,ProjectAccount:z,AccountTransaction:E,Workers:O,NewWorker:$,projectWorker:ae,Tasks:L,tTask:G,Inventory:K,ttable:Q,AddWorker:X,DCurrency:v,InvoiceRecord:Y,invoiceIndex:Z,projectInvoice:Ne},mounted(){this.getProject(),setTimeout(()=>{this.setSandard()},500)},watch:{isMetric(){this.updateStandard()}},methods:{async getProject(){const o=this;y.get(`${o.http}jsonproject/${o.id}`).then(s=>{o.project=s.data,o.alert={message:`Project ${o.id} was loaded successfully to your Desktop.`,status:"success"}}).catch(s=>{o.alert={message:s.message,status:"error"}})},updateProject(){const o=this;y.put(`${o.http}project/${o.id}`,o.project).then(s=>{o.alert={message:`${o.id} Updated Successfully!`,status:"info"}}).catch(s=>{o.alert={message:`${s.message}`,status:"error"}}),window.location.reload()},setSandard(){this.project.standard=="metric"?this.isMetric=!0:(this.project.standard="imperial",this.isMetric=!1)},updateStandard(){this.isMetric?this.project.standard="metric":this.project.standard="imperial"},pSwitch(o){switch(o){case"display":this.show.tasks=!1,this.show.addtasks=!1,this.show.addworker=!1,this.show.display=!0;break;case"task":this.show.display=!1,this.show.addtasks=!1,this.show.addworker=!1,this.show.tasks=!0;break;case"addtask":this.show.display=!1,this.show.tasks=!1,this.show.addworker=!1,this.show.addtasks=!0;break;case"addworker":this.show.display=!1,this.show.tasks=!1,this.show.addtasks=!1,this.show.addworker=!0;break}},displayInvoice(o){this.invoice=o},clearInvoice(){this.invoice=null},accountTransaction(o){this.transaction=o},displayWorker(o){this.worker=o}}},Fe={class:"text-blue-600 text-xl text-center"},Be={class:"mx-5"},Re={class:"absolute right-2 text-sm text-gray-700"},Ue={key:1,class:"flex flex-row h-12 bg-blue-300 text-sm mx-5 my-5 rounded-md"},He=e("span",{class:"mx-5"},"Completed Project",-1),Je={key:2,class:"flex flex-row h-12 bg-gray-300 text-sm mx-5 my-5 rounded-md"},qe=e("span",{class:"mx-5"},"Paused Project",-1),ze=e("span",{class:"mx-5"},"Restart",-1),Ee={key:3,class:"flex flex-row h-12 bg-red-300 text-sm mx-5 my-5 rounded-md"},Oe=e("span",{class:"mx-5"},"Terminated Project",-1),Le={class:"tabs"},Ge={key:0,id:"account",class:"flex flex-col w-full mx-2 bg-gray-50 border rounded-md shadow-md"},Ke={class:"bg-gray-400 h-12 items-center relative"},Qe=e("h6",null,"Account TD",-1),Xe={class:"absolute space-x-2 right-1"},Ye={key:1,id:"hr",class:"flex flex-col w-full mx-2"},Ze={class:"bg-gray-400 h-12 relative"},$e={class:"badge badge-primary my-2 mx-1"},et=_(" Workers "),tt={class:"absolute right-1 mt-2"},st={key:2,id:"jobs",class:"flex flex-col w-full mx-2"},ot={class:"bg-gray-400 h-12 relative"},nt={class:"mx-2 text-xl font semibold"},rt={class:"badge badge-primary my-2 mx-1"},ct=_(" Tasks"),lt={class:"absolute space-x-2 right-1 mt-2"},at=e("span",{class:"badge badge-primary cursor-pointer"},"project",-1),it={key:3,id:"inventory",class:"flex flex-col w-full mx-2"},dt={class:"bg-gray-400 h-12 relative"},ut={class:"badge badge-primary my-2 mx-1"},pt=_(" Inventory"),mt={key:4,id:"hardware",class:"flex flex-col w-full mx-2"},ht={key:0,class:"flex flex-col w-3/4 mx-10 my-10"},_t={key:1,class:"flex flex-col mx-5 my-10"},kt={key:2},yt={key:3},xt={key:4,id:"add-employee-console"},bt={key:5},wt={class:"text-red-500"};function ft(o,s,u,f,t,d){const m=a("site-alert"),h=a("DCurrency"),T=a("InvoiceRecord"),C=a("AccountTransaction"),I=a("ProjectAccount"),P=a("NewWorker"),D=a("workers"),W=a("tasks"),A=a("Inventory"),S=a("invoiceIndex"),M=a("projectInvoice"),N=a("ttable"),V=a("tTask"),F=a("AddWorker"),B=a("projectWorker"),R=a("stack-tpl");return n(),x(R,null,{xalert:k(()=>[l(m,{msg:t.alert},null,8,["msg"])]),header:k(()=>[t.project?(n(),r("div",{key:0,class:g(t.state.setting.outer)},[e("span",null,c(t.project.standard),1),H(e("input",{type:"checkbox",class:"toggle mx-2 mt-2","onUpdate:modelValue":s[0]||(s[0]=p=>t.isMetric=p)},null,512),[[J,t.isMetric]]),t.project.state.active?(n(),r("div",{key:0,class:g(t.state.setting.inner)},[e("span",Fe,"CentryPlan Project /"+c(t.project._id)+".",1),e("span",Be,c(t.project.name),1),e("span",null,[e("span",{class:"mx-5 badge badge-accent cursor-pointer",onClick:s[1]||(s[1]=(...p)=>d.updateProject&&d.updateProject(...p))}," Update Project")]),t.show.display?i("",!0):(n(),r("span",{key:0,class:"mx-5 badge badge-primary cursor-pointer",onClick:s[2]||(s[2]=p=>d.pSwitch("display"))},"Back to Project")),e("span",Re,"Category "+c(t.project.category),1)],2)):t.project.state.completed?(n(),r("div",Ue,[He,e("span",null,"Completion Date "+c(t.project.event.completed),1)])):t.project.state.paused?(n(),r("div",Je,[qe,e("span",null,"Paused on "+c(t.project.event.paused[-1]),1),ze])):(n(),r("div",Ee,[Oe,e("span",null,"Termination Date "+c(t.project.event.terminated),1)]))],2)):i("",!0)]),lsbar:k(()=>[e("div",Le,[e("a",{class:"tab tab-lifted tab-bordered tab-md",onClick:s[3]||(s[3]=p=>t.show.lsbar.account=!t.show.lsbar.account)},"Accounts"),e("a",{class:"tab tab-lifted tab-active",onClick:s[4]||(s[4]=p=>t.show.lsbar.hr=!t.show.lsbar.hr)},"HR"),e("a",{class:"tab tab-lifted",onClick:s[5]||(s[5]=p=>t.show.lsbar.jobs=!t.show.lsbar.jobs)},"Jobs"),e("a",{class:"tab tab-lifted",onClick:s[6]||(s[6]=p=>t.show.lsbar.hardware=!t.show.lsbar.hardware)},"Hardware"),e("a",{class:"tab tab-lifted",onClick:s[7]||(s[7]=p=>t.show.lsbar.inventory=!t.show.lsbar.inventory)},"Inventory")]),t.show.lsbar.account?(n(),r("section",Ge,[e("p",Ke,[Qe,l(h,{amount:t.project.account.ballance},null,8,["amount"]),e("span",Xe,[l(T,{id:t.project._id},null,8,["id"]),l(C)])]),t.project?(n(),x(I,{key:0,id:t.project._id,account:t.project.account,onAccountTransaction:d.accountTransaction},null,8,["id","account","onAccountTransaction"])):i("",!0)])):i("",!0),t.show.lsbar.hr?(n(),r("section",Ye,[e("p",Ze,[e("span",$e,c(t.project.workers.length),1),et,e("span",tt,[l(P,{id:t.project._id},null,8,["id"]),e("span",{class:"badge badge-secondary cursor-pointer mx-2",onClick:s[8]||(s[8]=p=>d.pSwitch("addworker"))},"add")])]),l(D,{id:t.project._id,workers:t.project.workers,onDisplayworker:d.displayWorker},null,8,["id","workers","onDisplayworker"])])):i("",!0),t.show.lsbar.jobs?(n(),r("section",st,[e("p",ot,[e("span",nt,[e("span",rt,c(t.project.tasks.length),1),ct]),e("span",lt,[e("span",{class:"badge cursor-pointer",onClick:s[9]||(s[9]=p=>d.pSwitch("task"))},"Index"),at,e("span",{class:"badge badge-secondary cursor-pointer",onClick:s[10]||(s[10]=p=>d.pSwitch("addtask"))},"add")])]),l(W,{id:t.project._id,tasks:t.project.tasks},null,8,["id","tasks"])])):i("",!0),t.show.lsbar.inventory?(n(),r("section",it,[e("p",dt,[e("span",ut,c(t.project.inventory.length),1),pt]),l(A,{id:t.project._id,inventory:t.project.inventory},null,8,["id","inventory"])])):i("",!0),t.show.lsbar.hardware?(n(),r("section",mt,[t.project?(n(),x(S,{key:0,invoices:t.project.account.records.invoices,onDisplayinvoice:d.displayInvoice,onClearInvoice:d.clearInvoice},null,8,["invoices","onDisplayinvoice","onClearInvoice"])):i("",!0)])):i("",!0)]),xdisplay:k(()=>[t.invoice?(n(),r("div",ht,[l(M,{record:t.invoice},null,8,["record"])])):i("",!0),t.transaction?(n(),r("div",_t,[_(c(t.transaction)+" ",1),e("button",{class:"btn btn-sm",onClick:s[11]||(s[11]=p=>t.transaction=!t.transaction)},"Clear Transaction")])):i("",!0),t.show.tasks?(n(),r("section",kt,[l(N)])):i("",!0),t.show.addtasks?(n(),r("section",yt,[l(V,{id:t.project._id,standard:t.project.standard,employees:t.project.workers,"project-tasks":t.project.tasks},null,8,["id","standard","employees","project-tasks"])])):i("",!0),t.show.addworker?(n(),r("section",xt,[l(F,{id:t.project._id,workers:t.project.workers},null,8,["id","workers"])])):i("",!0),t.worker?(n(),r("section",bt,[l(B,{employee:t.worker,"project-tasks":t.project.tasks},null,8,["employee","project-tasks"]),e("button",{class:"btn btn-sm",onClick:s[12]||(s[12]=p=>t.worker=!t.worker)},"Clear Employee")])):i("",!0),e("p",wt,c(d.message),1)]),xfooter:k(()=>[e("p",null,"Welcome to CentryPlan Project Manager "+c(o.http),1)]),_:1})}const Pt=w(Ve,[["render",ft]]);export{Pt as default};
