import{o as n,c as a,d as e,t as r,F as u,e as _,h as V,_ as k,i as w,b as v,f as d,w as b,r as y,a as g,u as f,j as S,m as $}from"./index.d0819ba4.js";import{s as C}from"./stackTpl.66f77d3f.js";const N={class:"card w-full bg-base-100 shadow-xl mx-5 my-5"},B={class:"card-body"},I={class:"card-title text-center"},U={class:"flex flex-row"},D={class:"flex flex-row"},T={class:"w-1/2"},j={class:"w-1/2"},F=e("div",{class:"divider"},"Banking Details",-1),M={class:"font-semibold mx-5"},P=e("div",{class:"card-actions justify-end"},[e("button",{class:"badge badge-primary"},"Contact ")],-1),A={__name:"supplierRecord",props:{record:{Object}},setup(s){const t=s;return(m,h)=>(n(),a("div",N,[e("div",B,[e("h2",I,r(t.record.name),1),e("p",U,[e("span",null,"Tax ID. "+r(s.record.taxid),1)]),e("section",D,[e("address",T,[e("ul",null,[(n(!0),a(u,null,_(s.record.address,(l,c)=>(n(),a("li",{key:c},r(l),1))),128))])]),e("p",j,[e("ul",null,[(n(!0),a(u,null,_(s.record.contact,(l,c)=>(n(),a("li",{key:c},r(c)+" "+r(l),1))),128))])])]),e("section",null,[F,e("ul",null,[(n(!0),a(u,null,_(s.record.account.bank,(l,c)=>(n(),a("li",{key:c},[e("span",M,r(c),1),V(" "+r(l),1)]))),128))])]),P])]))}},K={name:"newSupplier",data(){return{error:null,title:"New Supplier Record",record:{name:null,account:{bank:{branch:null,name:null,account:null},transactions:[{id:"project-inv no.",ref:"invoice no.",date:null,amt:null}]},address:{lot:null,street:null,town:null,city_parish:null,country:"Jamaica"},contact:{tel:null,mobile:null,email:null},taxid:null},nameSchema:[{$formkit:"text",name:"name",label:"Name",validation:"required|name",placeholder:"Supplier's name"},{$formkit:"text",name:"taxid",label:"Tax Id."}],addressSchema:[{$formkit:"text",name:"lot",label:"Lot",placeholder:"Lot number"},{$formkit:"text",name:"street",label:"Street",placeholder:"Street  name"},{$formkit:"text",name:"city_parish",label:"City or Parish",placeholder:"City or Parish"},{$formkit:"text",name:"country",label:"Country",placeholder:"Country"}],contactSchema:[{$formkit:"tel",name:"tel",label:"Phone number",placeholder:"xxx-xxx-xxxx",validation:"matches:/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/"},{$formkit:"text",name:"mobile",label:"Mobile No.",placeholder:"Mobile No."},{$formkit:"email",name:"email",label:"Email"}]}},methods:{submitRecord(){const s=this;s.record.taxid?s.record._id=s.record.taxid:s.record.contact.tel?s.record._id=s.record.contact.tel:s.record.contact.mobile&&(s.record._id=s.record.contact.mobile),w.post(`${this.http}newsupplier`,s.record).then(t=>{t.status==200||(s.error="Duplicate Data, The data you are trying to submit is already in our database.")}).catch(t=>{s.error=t.message})}}},L=e("label",{for:"spl-rec",class:"btn btn-primary btn-sm modal-button"},"New Supplier",-1),R=e("input",{type:"checkbox",id:"spl-rec",class:"modal-toggle"},null,-1),E={for:"spl-rec",class:"modal cursor-pointer"},O={class:"modal-box relative w-11/12 max-w-full",for:""},q={class:"text-red-500"},G={class:"text-lg font-bold"},J={class:"flex flex-row"},W={class:"flex flex-col mx-2 w-1/3"},Y=e("p",{class:"my-5 font-semibold"},"Supplier's Identity",-1),z=e("div",{class:"divider w-3/4 my-5"},"Contact Information",-1),H={class:"flex flex-col mx-2 w-1/3"},Q=e("p",{class:"my-5 font-semibold"},"Supplier's Banking Information",-1),X=e("p",{class:"my-5 font-semibold"},"Supplier's Address",-1),Z={class:"flex flex-col mx-2 w-1/3"},ee=e("p",null,"Supplier",-1),le={class:"card w-full bg-base-100 shadow-xl mx-5 my-5"},te={class:"card-body"},oe={class:"card-title"},se={class:"flex flex-row"},re={class:"flex flex-row"},ne={class:"w-1/2"},ae={class:"w-1/2"},ce=e("div",{class:"divider"},"Banking Details",-1),de={class:"font-semibold mx-5"},ie=e("div",{class:"card-actions justify-end"},[e("button",{class:"badge badge-primary"},"contact supplier ")],-1);function ue(s,t,m,h,l,c){const x=v("FormKitSchema"),i=v("FormKit");return n(),a(u,null,[L,R,e("label",E,[e("label",O,[e("p",q,r(l.error),1),e("h3",G,r(l.title)+"/ "+r(s.id),1),e("div",J,[e("div",W,[Y,d(i,{type:"form",id:"supplier-record",modelValue:l.record,"onUpdate:modelValue":t[1]||(t[1]=o=>l.record=o),actions:!1},{default:b(()=>[d(x,{schema:l.nameSchema},null,8,["schema"]),z,d(i,{type:"form",id:"supplier-contact",modelValue:l.record.contact,"onUpdate:modelValue":t[0]||(t[0]=o=>l.record.contact=o),onSubmit:c.submitRecord},{default:b(()=>[d(x,{schema:l.contactSchema},null,8,["schema"])]),_:1},8,["modelValue","onSubmit"])]),_:1},8,["modelValue"])]),e("div",H,[Q,d(i,{type:"text",modelValue:l.record.account.bank.name,"onUpdate:modelValue":t[2]||(t[2]=o=>l.record.account.bank.name=o),label:"Bank Name",placeholder:"NCB/CNBC/BNS ...."},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.account.bank.branch,"onUpdate:modelValue":t[3]||(t[3]=o=>l.record.account.bank.branch=o),label:"Bank Branch",placeholder:"MAY PEN"},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.account.bank.account,"onUpdate:modelValue":t[4]||(t[4]=o=>l.record.account.bank.account=o),label:"Account no.",placeholder:"Acc. Number"},null,8,["modelValue"]),X,d(i,{type:"text",modelValue:l.record.address.lot,"onUpdate:modelValue":t[5]||(t[5]=o=>l.record.address.lot=o),label:"Lot"},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.address.street,"onUpdate:modelValue":t[6]||(t[6]=o=>l.record.address.street=o),label:"Street"},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.address.town,"onUpdate:modelValue":t[7]||(t[7]=o=>l.record.address.town=o),label:"Town"},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.address.city_parish,"onUpdate:modelValue":t[8]||(t[8]=o=>l.record.address.city_parish=o),label:"City or Parish"},null,8,["modelValue"]),d(i,{type:"text",modelValue:l.record.address.country,"onUpdate:modelValue":t[9]||(t[9]=o=>l.record.address.country=o),label:"Country"},null,8,["modelValue"])]),e("div",Z,[ee,e("div",le,[e("div",te,[e("h2",oe,r(l.record.name),1),e("p",se,[e("span",null,"Tax ID. "+r(l.record.taxid),1)]),e("section",re,[e("address",ne,[e("ul",null,[(n(!0),a(u,null,_(l.record.address,(o,p)=>(n(),a("li",{key:p},r(o),1))),128))])]),e("p",ae,[e("ul",null,[(n(!0),a(u,null,_(l.record.contact,(o,p)=>(n(),a("li",{key:p},r(p)+" "+r(o),1))),128))])])]),e("section",null,[ce,e("ul",null,[(n(!0),a(u,null,_(l.record.account.bank,(o,p)=>(n(),a("li",{key:p},[e("span",de,r(p),1),V(" "+r(o),1)]))),128))])]),ie])])])])])])],64)}const me=k(K,[["render",ue]]),pe={class:"card w-full bg-base-100 shadow-xl mx-5 my-5"},_e={class:"card-body"},he={class:"card-title"},xe={class:"flex-flex-row"},be=e("div",{class:"card-actions justify-end"},[e("button",{class:"badge badge-primary"},"See ")],-1),fe={__name:"supplierIndexItem",props:{record:{Object}},setup(s){const t=s;return(m,h)=>(n(),a("div",pe,[e("div",_e,[e("h2",he,r(t.record.name),1),e("p",xe,[e("span",null,"Tax ID. "+r(t.record.taxid),1)]),be])]))}};const ye={class:"bg-gray-400 h-12 my-5 relative w-full ml-5 rounded"},we=e("span",{class:"text-xl font-semibold py-2 px-2"},"Suppliers Index",-1),ve={class:"absolute right-1 my-2"},Ve={id:"suppliers-index",class:"w-full overflow-y-auto p-2"},ke=["onClick"],ge={__name:"suppliersIndex",setup(s){var t=y([]),m=y(null);async function h(){w.get(`http://${window.location.hostname}/suppliers_name_index`).then(l=>{l.status==200?t.value=l.data:t.value=[]}).catch(l=>{m.value=l.message})}return g(h()),(l,c)=>(n(),a(u,null,[e("p",ye,[we,e("span",ve,[d(me)])]),e("ul",Ve,[(n(!0),a(u,null,_(f(t),x=>(n(),a("li",{class:"cursor-pointer",onClick:i=>l.$emit("getsupplier",x._id)},[d(fe,{record:x},null,8,["record"])],8,ke))),256))])],64))}},Se=e("p",null,"Welcome to CentryPlan Suppliers Manager",-1),$e={class:"text-red-500 mx-5 my-5"},Ce={key:0,id:"supplier"},Ne=e("p",{class:"text-2xl text-center font-bold my-10"},"Supplier",-1),Ue={__name:"supplierManager",setup(s){var t=y(null),m=y(null);async function h(l){w.get(`http://${window.location.hostname}/supplier/${l}`).then(c=>{c.status==200&&(t.value=c.data)}).catch(c=>{m.value=c.message})}return(l,c)=>(n(),S(C,null,{header:b(()=>[Se,e("p",$e,r(f(m)),1)]),lsbar:b(()=>[d(ge,{onGetsupplier:h})]),xdisplay:b(()=>[f(t)?(n(),a("section",Ce,[Ne,e("span",null,[d(A,{record:f(t)},null,8,["record"])])])):$("",!0)]),_:1}))}};export{Ue as default};
