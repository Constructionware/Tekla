import{_ as x,o as r,c,d as s,l as _,F as D,s as M,i as u,j as k,w as m,b as n,f as l,t as i,m as a,n as N,v as B,h}from"./index.d0819ba4.js";import{P as V,A as R,W as U,T as F,_ as E,I as q,t as z,a as G,b as H,c as J,i as K}from"./invoiceIndex.eb9fdb73.js";import{N as L}from"./newWorker.0da50cd2.js";import"./tabulator_esm.e1f37e8f.js";const O={},Q={id:"xalert",class:"mx-5"},X={class:"bg-gray-50 flex flex-col mx-5"},Y={id:"xd1",class:"flex flex-col"},Z={id:"xf1",class:"flex flex-col"};function $(t,o){return r(),c(D,null,[s("div",Q,[_(t.$slots,"xalert")]),s("div",X,[s("nav",null,[_(t.$slots,"sitenav")]),s("header",null,[_(t.$slots,"header")]),s("div",Y,[_(t.$slots,"xdisplay")]),s("div",Z,[_(t.$slots,"xfooter")])])],64)}const ee=x(O,[["render",$]]),se={props:{id:{String}},inject:["message"],data(){return{alert:{message:`Welcome to CentryPlan Project/${this.id}`,status:"info"},project:null,isMetric:!1,show:{display:!0,tasks:!1,addtask:!1,addworker:!1}}},components:{workTpl:ee,siteAlert:M,ProjectAccount:V,AccountTransaction:R,Workers:U,NewWorker:L,Tasks:F,tTask:E,Inventory:q,ttable:z,AddWorker:G,DCurrency:H,InvoiceRecord:J,invoiceIndex:K},mounted(){this.getProject(),setTimeout(()=>{this.setSandard()},50)},watch:{isMetric(){this.updateStandard()}},methods:{getProject(){const t=this;u.get(`${t.http}jsonproject/${t.id}`).then(o=>{t.project=o.data,t.alert={message:`Project ${t.id} was loaded successfully to your Desktop.`,status:"success"}}).catch(o=>{t.alert={message:o.message,status:"error"}})},updateProject(){const t=this;u.put(`${t.http}project/${t.id}`,t.project).then(o=>{t.alert={message:`${t.id} Updated Successfully!`,status:"info"}}).catch(o=>{t.alert={message:`${o.message}`,status:"error"}}),window.location.reload()},setSandard(){this.project.standard=="metric"?this.isMetric=!0:(this.project.standard="imperial",this.isMetric=!1)},updateStandard(){this.isMetric?this.project.standard="metric":this.project.standard="imperial"},pSwitch(t){switch(t){case"display":this.show.tasks=!1,this.show.addtasks=!1,this.show.addworker=!1,this.show.display=!0;break;case"task":this.show.display=!1,this.show.addtasks=!1,this.show.addworker=!1,this.show.tasks=!0;break;case"addtask":this.show.display=!1,this.show.tasks=!1,this.show.addworker=!1,this.show.addtasks=!0;break;case"addworker":this.show.display=!1,this.show.tasks=!1,this.show.addtasks=!1,this.show.addworker=!0;break}}}},te={key:0},oe={key:0,class:"flex flex-row h-12 bg-green-300 text-sm mx-5 my-5 rounded-md"},re=s("span",{class:"mx-5"},"Active Project",-1),ce=[re],ne={key:1,class:"flex flex-row h-12 bg-blue-300 text-sm mx-5 my-5 rounded-md"},ae=s("span",{class:"mx-5"},"Completed Project",-1),ie={key:2,class:"flex flex-row h-12 bg-gray-300 text-sm mx-5 my-5 rounded-md"},le=s("span",{class:"mx-5"},"Paused Project",-1),de=s("span",{class:"mx-5"},"Restart",-1),pe={key:3,class:"flex flex-row h-12 bg-red-300 text-sm mx-5 my-5 rounded-md"},_e=s("span",{class:"mx-5"},"Terminated Project",-1),he={key:1,class:"text-blue-600 text-3xl text-center font-bold mx-5 spacing-2 relative"},me={class:"flex flex-row text-2lg absolute left-2"},ue=h("Project Units "),ke={class:"text-blue-600 text-xl text-center"},xe={class:"mx-5"},je={class:"absolute right-2 text-sm text-gray-700"},ye={key:2,class:"flex flex-row mx-5 bg-teal-50"},we={key:0,class:"flex flex-col w-1/4 mx-2 bg-gray-50 border rounded-md shadow-md"},fe={class:"bg-gray-400 h-12 items-center relative"},ge=s("h6",null,"Account TD",-1),be={class:"absolute space-x-2 right-1"},ve={key:1,class:"flex flex-col w-1/4 mx-2"},Pe={class:"bg-gray-400 h-12 relative"},Ce={class:"badge badge-primary my-2 mx-1"},Te=h(" Workers "),Ae={class:"absolute right-1 mt-2"},Se={key:2,class:"flex flex-col w-1/4 mx-2"},Ie={class:"bg-gray-400 h-12 relative"},We={class:"mx-2 text-xl font semibold"},De={class:"badge badge-primary my-2 mx-1"},Me=h(" Tasks"),Ne={class:"absolute space-x-2 right-1 mt-2"},Be=s("span",{class:"badge badge-primary cursor-pointer"},"project",-1),Ve={key:3,class:"flex flex-col w-1/4 mx-2"},Re={class:"bg-gray-400 h-12 relative"},Ue={class:"badge badge-primary my-2 mx-1"},Fe=h(" Inventory"),Ee={key:3},qe={key:4},ze={key:5,id:"add-employee-console"},Ge={key:6},He={key:7},Je={class:"text-red-500"},Ke={class:"text-red-500"};function Le(t,o,Oe,Qe,e,d){const j=n("site-alert"),y=n("DCurrency"),w=n("InvoiceRecord"),f=n("AccountTransaction"),g=n("ProjectAccount"),b=n("NewWorker"),v=n("workers"),P=n("tasks"),C=n("Inventory"),T=n("ttable"),A=n("tTask"),S=n("AddWorker"),I=n("invoiceIndex"),W=n("work-tpl");return r(),k(W,null,{xalert:m(()=>[l(j,{msg:e.alert},null,8,["msg"])]),header:m(()=>[s("p",null,"Welcome to CentryPlan Project Manager "+i(t.http),1)]),xdisplay:m(()=>[e.project?(r(),c("div",te,[e.project.state.active?(r(),c("div",oe,ce)):e.project.state.completed?(r(),c("div",ne,[ae,s("span",null,"Completion Date "+i(e.project.event.completed),1)])):e.project.state.paused?(r(),c("div",ie,[le,s("span",null,"Paused on "+i(e.project.event.paused[-1]),1),de])):(r(),c("div",pe,[_e,s("span",null,"Termination Date "+i(e.project.event.terminated),1)]))])):a("",!0),e.project?(r(),c("p",he,[s("span",me,[s("label",null,[ue,s("span",null,i(e.project.standard),1)]),N(s("input",{type:"checkbox",class:"toggle mx-5 mt-2","onUpdate:modelValue":o[0]||(o[0]=p=>e.isMetric=p)},null,512),[[B,e.isMetric]])]),s("span",ke,"CentryPlan Project /"+i(e.project._id)+".",1),s("span",xe,i(e.project.name),1),s("span",null,[s("span",{class:"mx-5 badge badge-accent cursor-pointer",onClick:o[1]||(o[1]=(...p)=>d.updateProject&&d.updateProject(...p))}," Update Project")]),e.show.display?a("",!0):(r(),c("span",{key:0,class:"mx-5 badge badge-primary cursor-pointer",onClick:o[2]||(o[2]=p=>d.pSwitch("display"))},"Back to Project")),s("span",je,"Category "+i(e.project.category),1)])):a("",!0),e.show.display?(r(),c("div",ye,[e.project?(r(),c("section",we,[s("p",fe,[ge,l(y,{amount:e.project.account.ballance},null,8,["amount"]),s("span",be,[l(w,{id:e.project._id},null,8,["id"]),l(f)])]),e.project?(r(),k(g,{key:0,account:e.project.account},null,8,["account"])):a("",!0)])):a("",!0),e.project?(r(),c("section",ve,[s("p",Pe,[s("span",Ce,i(e.project.workers.length),1),Te,s("span",Ae,[l(b,{id:e.project._id},null,8,["id"]),s("span",{class:"badge badge-secondary cursor-pointer mx-2",onClick:o[3]||(o[3]=p=>d.pSwitch("addworker"))},"add")])]),l(v,{id:e.project._id,workers:e.project.workers},null,8,["id","workers"])])):a("",!0),e.project?(r(),c("section",Se,[s("p",Ie,[s("span",We,[s("span",De,i(e.project.tasks.length),1),Me]),s("span",Ne,[s("span",{class:"badge cursor-pointer",onClick:o[4]||(o[4]=p=>d.pSwitch("task"))},"Index"),Be,s("span",{class:"badge badge-secondary cursor-pointer",onClick:o[5]||(o[5]=p=>d.pSwitch("addtask"))},"add")])]),l(P,{id:e.project._id,tasks:e.project.tasks},null,8,["id","tasks"])])):a("",!0),e.project?(r(),c("section",Ve,[s("p",Re,[s("span",Ue,i(e.project.inventory.length),1),Fe]),l(C,{id:e.project._id,inventory:e.project.inventory},null,8,["id","inventory"])])):a("",!0)])):a("",!0),e.show.tasks?(r(),c("section",Ee,[l(T)])):a("",!0),e.show.addtasks?(r(),c("section",qe,[l(A,{id:e.project._id,standard:e.project.standard,employees:e.project.workers,"project-tasks":e.project.tasks},null,8,["id","standard","employees","project-tasks"])])):a("",!0),e.show.addworker?(r(),c("section",ze,[l(S,{id:e.project._id,workers:e.project.workers},null,8,["id","workers"])])):a("",!0),e.project?(r(),c("section",Ge)):a("",!0),e.project?(r(),c("section",He,[l(I,{invoices:e.project.account.records.invoices},null,8,["invoices"]),s("p",Je,i(e.project.account.transactions.withdraw),1)])):a("",!0),s("p",Ke,i(d.message),1)]),_:1})}const es=x(se,[["render",Le]]);export{es as default};
