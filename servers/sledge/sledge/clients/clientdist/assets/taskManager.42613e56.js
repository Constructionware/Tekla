import{_ as p,o as u,c as m,d as l,l as n,F as x,i as b,b as y,t as c,m as h,f as o,w as d,r as _,j as g,s as V,h as v}from"./index.d0819ba4.js";import{T}from"./tabulator_esm.e1f37e8f.js";const w={},U={id:"xalert",class:"mx-5"},C={class:"bg-gray-50 flex flex-col"},P={id:"xd2",class:"flex flex-col w-full mx-2"},F={id:"xf2",class:"flex flex-col"};function S(i,e){return u(),m(x,null,[l("div",U,[n(i.$slots,"xalert")]),l("div",C,[l("nav",null,[n(i.$slots,"sitenav")]),l("header",null,[n(i.$slots,"header")]),l("div",P,[n(i.$slots,"xdisplay")]),l("div",F,[n(i.$slots,"xfooter")])])],64)}const M=p(w,[["render",S]]),I={name:"task-view",props:{id:String},data(){return{error:null,title:"CentryPlan Task Capture Console",task:{title:null,description:null,metric:{unit:null,price:0,quantity:0,total:null},imperial:{unit:null,price:0,quantity:0,total:null},state:{active:!1,complete:!1,pause:!1,terminate:!1},event:{started:null,completed:null,paused:[],restart:[],terminated:null},assigned:!1,assignedto:null,phase:null,paid:null,timestamp:Date.parse(new Date),comments:[],progress:0,output:{metric:0,imperial:0},category:null}}},computed:{covertUnit(){switch(this.task.metric.unit){case"m":this.task.imperial.unit="ft";break;case"m2":this.task.imperial.unit="ft2";break;case"m3":this.task.imperial.unit="ft3";break}}},methods:{submitForm(){const i=this;b.post(`${this.http}savetask`,i.task).then(e=>{console.log("Submitted",e),e.status==200&&window.location.reload()}).catch(e=>{i.error=e.message})},printForm(){alert("This Feature is being tested! Use with caution."),printJS({printable:"task-form",type:"html",targetStyles:["*"],footer:"__ &reg CentryPlan Building Services __"})}}},D=l("label",{for:"new-task",class:"btn btn-secondary btn-sm modal-button"},"New Task",-1),B=l("input",{type:"checkbox",id:"new-task",class:"modal-toggle"},null,-1),N={for:"new-task",class:"modal cursor-pointer"},O={class:"modal-box relative",for:""},$={class:"text-lg font-bold"},j={key:0,class:"text-red-500 my-2"},q={id:"task-form",class:"px-5 py-4"},K=l("p",{class:"text-2xl text-gray-700 font-semibold text-center"},"CentryPlan Building Services ",-1),W=l("p",{class:"text-lg text-gray-600 font-semibold text-center"},"Task Capture Form",-1),A=l("div",{class:"divider"},"Metric Propertiec ",-1),E={class:"flex flex-row"},J=l("div",{class:"divider"},"Imperial Propertiec ",-1),z={class:"flex flex-row"};function G(i,e,f,k,t,a){const r=y("FormKit");return u(),m("div",null,[D,B,l("label",N,[l("label",O,[l("h3",$,c(t.title),1),t.error?(u(),m("p",j,c(t.error),1)):h("",!0),l("div",q,[K,W,o(r,{type:"form",onSubmit:a.submitForm},{default:d(()=>[o(r,{type:"text",modelValue:t.task.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.task.title=s),label:"Title"},null,8,["modelValue"]),o(r,{type:"text",modelValue:t.task.description,"onUpdate:modelValue":e[1]||(e[1]=s=>t.task.description=s),label:"Description"},null,8,["modelValue"]),o(r,{type:"text",modelValue:t.task.category,"onUpdate:modelValue":e[2]||(e[2]=s=>t.task.category=s),label:"Category"},null,8,["modelValue"]),A,l("div",E,[o(r,{type:"text",modelValue:t.task.metric.unit,"onUpdate:modelValue":e[3]||(e[3]=s=>t.task.metric.unit=s),label:"Unit"},null,8,["modelValue"]),o(r,{type:"number",modelValue:t.task.metric.price,"onUpdate:modelValue":e[4]||(e[4]=s=>t.task.metric.price=s),modelModifiers:{number:!0},label:"Price"},null,8,["modelValue"]),o(r,{type:"number",modelValue:t.task.output.metric,"onUpdate:modelValue":e[5]||(e[5]=s=>t.task.output.metric=s),modelModifiers:{number:!0},label:"Daily Output"},null,8,["modelValue"])]),J,l("div",z,[o(r,{type:"text",modelValue:t.task.imperial.unit,"onUpdate:modelValue":e[6]||(e[6]=s=>t.task.imperial.unit=s),label:"Unit",value:a.covertUnit},null,8,["modelValue","value"]),o(r,{type:"number",modelValue:t.task.imperial.price,"onUpdate:modelValue":e[7]||(e[7]=s=>t.task.imperial.price=s),modelModifiers:{number:!0},label:"Price"},null,8,["modelValue"]),o(r,{type:"number",modelValue:t.task.output.imperial,"onUpdate:modelValue":e[8]||(e[8]=s=>t.task.output.imperial=s),modelModifiers:{number:!0},label:"Daily Output"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),l("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...s)=>a.printForm&&a.printForm(...s))},"Print Form")])])])}const H=p(I,[["render",G]]),L={name:"task-view",data(){return{tasksIndex:null,error:null}},mounted(){this.getTasks(),setTimeout(()=>{this.setTasksTable()},500)},methods:{async getTasks(){const i=this;b.get(`${i.http}tasks`).then(e=>{i.tasksIndex=e.data}).catch(e=>{i.error=e.message})},setTasksTable(){new T("#tasksindex",{placeholder:"Tasks Index",data:this.tasksIndex,index:"_id",columns:[{title:"Id",field:"_id"},{title:"Category",field:"category"},{title:"Title",field:"title"},{title:"Description",field:"description"},{title:"Metric Unit",field:"metric.unit"},{title:"Output",field:"output.metric"},{title:"Price",field:"metric.price"},{title:"Imperial unit",field:"imperial.unit"},{title:"Output",field:"output.imperial"},{title:"Price",field:"imperial.price"}]})}}},Q={class:"text-red-500"},R=l("div",{id:"tasksindex"},null,-1);function X(i,e,f,k,t,a){return u(),m(x,null,[l("p",Q,c(t.error),1),R],64)}const Y=p(L,[["render",X]]),Z={class:"flex flex-row h-14 relative"},ee=v("Welcome to CentryPlan Task Manager "),te={class:"absolute right-1"},ie={__name:"taskManager",setup(i){_(!1);const e=_({message:"Welcome to CentryPlan Project Manager!",status:"info"});return(f,k)=>(u(),g(M,null,{xalert:d(()=>[o(V,{msg:e.value},null,8,["msg"])]),header:d(()=>[l("p",Z,[ee,l("span",te,[o(H,{id:"1"})])])]),xdisplay:d(()=>[o(Y)]),_:1}))}};export{ie as default};
